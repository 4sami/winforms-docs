<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=9">
        <title>Using the DragDropService</title>
		
        <link href="/devtools/winforms/favicon.ico?Version=2014" rel="shortcut icon" />
		
        <meta name="description" content="Using the DragDropService">
        <link href="http://cdn.kendostatic.com/2014.2.716/styles/kendo.common.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="/devtools/winforms/assets/styles-0b5a71aa940403cb3ac60d7e91e25e1d.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/theme-52ac78f88dc084a004a9f7d63a3c4245.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/branding-fafb6ed99bf90d251675534381e6f139.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/highlight-49ceada082f1c903edb130c25d09cf1f.css">
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://cdn.kendostatic.com/2014.2.716/js/kendo.web.min.js"></script>
        <script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/app-6da8e8e1ef6e19ee4a020ec34f48078c.js"></script>
		<script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/branding-59377013fb75f02a1dbffd638033ef6d.js"></script>
		<script src="/devtools/winforms/assets/feedback-76cd418a099f8d21592f412fb4a31191.js"></script>
		
		<!--[if lt IE 9]>
		<script>
		document.createElement('header');
		document.createElement('nav');
		document.createElement('section');
		document.createElement('article');
		document.createElement('aside');
		document.createElement('footer');
		document.createElement('hgroup');
		</script>
		<![endif]-->
    </head>
    <body class="faux-columns">
        <!-- Google Tag Manager -->
        <noscript>
            <iframe src="//www.googletagmanager.com/ns.html?id=GTM-6X92" height="0" width="0" style="display: none; visibility: hidden"></iframe>
        </noscript>
        <script>(function(w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-6X92');</script>
        <!-- End Google Tag Manager -->
        <header id="page-header">
			<span class="toggle-nav"><span></span></span>
            <div id="logo-bar">
	<a href="/devtools/winforms/" title="UI for WinForms">
		<span>UI for WinForms</span>
	</a>
</div> 
<div id="page-search">
	<script>
  (function() {
    var cx = '001595215763381649090:jt1stbj813w';
    var gcse = document.createElement('script');
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

</div>

<span class="show-search">
	<span class="k-icon k-i-search"></span>
</span>

<div class="nav-buttons">
	<a href="http://demos.telerik.com/wpf/" title="WPF Demos" target="_blank" class="btn demos-btn">Demos</a>	
	<a href="http://www.telerik.com/products/wpf/overview.aspx" title="About UI for WPF" target="_blank" class="btn about-btn">About</a>
	<a href="http://www.telerik.com/purchase/individual/wpf.aspx" title="Pricing" target="_blank" class="btn pricing-btn">Pricing</a>
	<a href="http://www.telerik.com/products/wpf/download.aspx" title="Try now" target="_blank" class="btn btn-primary">Try now</a>
</div>





        </header>

        <div id="page-inner-content">
    <div id="page-nav">
        <div id="page-tree"></div>
        <script>
			$("#page-tree").kendoTreeView({
				dataSource: {
					transport: {
						read: {
							url: "/devtools/winforms/default.json",
							dataType: "json"
						}
					},
					schema: {
						model: {
							id: "path",
							children: "items",
							hasChildren: "items"
						}
					}
				},
				select: preventParentSelection,
				template: navigationTemplate("/devtools/winforms/"),
				dataBound: expandNavigation("dock/architecture-and-features/using-the-dragdropservice.html")
			});
        </script>
		<div id="page-api" class="k-treeview">
			<ul class="k-group">
				<li class="k-item">
					<span class="k-icon k-plus" role="presentation"></span>
					<span class="k-in">
						<a href="/devtools/winforms/api/" target="_blank">API Reference</a>
					</span>
				</li>
			</ul>
		</div>			
    </div>
	<a id="page-edit-link" class="btn btn-action" href="https://github.com/telerik/xaml-docs/edit/master/dock/architecture-and-features/using-the-dragdropservice.md">Edit this page</a>
    <div id="page-article">       
        <article>
            <h1 id="using-the-dragdropservice"><a href="#using-the-dragdropservice">Using the DragDropService</a></h1>

<h2 id="overview"><a href="#overview">Overview</a></h2>

<p>The new docking framework introduces service-based semantic, which allows for granular and pluggable functionality per RadDock instance. Entire drag-and-drop functionality is handled by the registered DragDropService instance, which simply receives drag requests and instantiates the appropriate operation. The service is responsible for drop target hit-testing, displaying docking guides and docking hints as well as for processing user input while dragging is in progress.<img src="images/dock-architecture-and-features-using-the-dragdropservice001.png" alt="dock-architecture-and-features-using-the-dragdropservice 001"></p>

<h2 id="canceling-drag-and-drop-operation"><a href="#canceling-drag-and-drop-operation">Canceling Drag-and-drop operation</a></h2>

<p>A running drag-and-drop operation (DDO) may be easily canceled by either pressing the ESAPE key or manually, by calling the following method:</p>

<h4><strong>[C#] Canceling Drag-and-drop operation</strong></h4>

<pre><code>            DragDropService service = this.radDock1.GetService&lt;DragDropService&gt;();
            service.Stop(false);
</code></pre>

<h4><strong>[VB.NET] Canceling Drag-and-drop operation</strong></h4>

<pre><code>        Dim service As DragDropService = Me.RadDock1.GetService(Of DragDropService)()
        service.Stop(False)
</code></pre>

<p>The Boolean parameter determines whether the operation should be committed (applied) or not.</p>

<h2 id="drag-and-drop-modes"><a href="#drag-and-drop-modes">Drag-and-drop Modes</a></h2>

<p>The service can operate in two modes: Immediate and Preview. The Immediate mode is the default one and it means that when a drag-and-drop operation is instantiated, the dragged window will be immediately detached from its current DockTabStrip and will become floating. On the contrary, in Preview mode the DockWindow will not be detached but rather a semi-translucent rectangle will be displayed, indicating the floating position it would take if the operation is committed. The major benefit of this new mode is that the operation is completely cancelable. The Preview mode is currently used by the framework at design-time.<img src="images/dock-architecture-and-features-using-the-dragdropservice002.png" alt="dock-architecture-and-features-using-the-dragdropservice 002"></p>

<p><em>ToolWindow3 is being dragged and the service is in Preview mode. The semi-translucent rectangle indicates the floating bounds the window will occupy if the operation is committed.</em></p>

<p>You can switch between <em>Preview</em> and <em>Immediate</em> modes by setting the <strong>DragDropMode</strong> property of RadDock:</p>

<h4><strong>[C#] Setting DragDropMode</strong></h4>

<pre><code>            this.radDock1.DragDropMode = DragDropMode.Preview;
</code></pre>

<h4><strong>[VB.NET] Setting DragDropMode</strong></h4>

<pre><code>        Me.RadDock1.DragDropMode = DragDropMode.Preview
</code></pre>

<h2 id="alloweddockstates"><a href="#alloweddockstates">AllowedDockStates</a></h2>

<p>The service may be told which dock states are allowed to be hit-tested. For example we may exclude any floating window from hit-testing by simply specifying the following:</p>

<h4><strong>[C#] Setting AllowedStates</strong></h4>

<pre><code>            DragDropService service = this.radDock1.GetService&lt;DragDropService&gt;();
            service.AllowedStates &amp;= ~AllowedDockState.Floating;
</code></pre>

<h4><strong>[VB.NET] Setting AllowedStates</strong></h4>

<pre><code>        Dim service As DragDropService = Me.RadDock1.GetService(Of DragDropService)()
        service.AllowedStates = service.AllowedStates And Not AllowedDockState.Floating
</code></pre>

<h2 id="extending-services-behavior-by-handling-events"><a href="#extending-services-behavior-by-handling-events">Extending Service’s Behavior by Handling Events</a></h2>

<ul>
<li><p><strong>Starting</strong>: Notifies that the service is about to start. The drag context is passed as an event argument, which allows listeners to examine it and optionally cancel undesired operation.</p></li>
<li><p><strong>Started</strong>: Notifies for a successfully started DDO.</p></li>
<li><p><strong>Stopping</strong>: Notifies that the service is about to stop. The Commit parameter is passed as an event argument, which allows listeners to examine it and to modify it or to prevent the service from stopping.</p></li>
<li><p><strong>Stopped</strong>: Notifies that the service is successfully stopped.</p></li>
<li><p><strong>Dragging</strong>: Notifies for a drag pass, performed upon each mouse move. Allows listeners to stop the DDO under some circumstances.</p></li>
<li><p><strong>PreviewDropTarget</strong>: Allows listeners to examine and/or optionally modify the currently hit-tested drop target. For example this may be used to exclude certain panels from being hit-tested.</p></li>
<li><p><strong>PreviewDockPosition</strong>: Allows listeners to examine and optionally modify the allowed dock position for the current drag operation. For example, here is right place to allow dock only bottom for a specific drop target.</p></li>
<li><p><strong>PreviewHitTest</strong>: Allows for preview and/or modification of the generated hit-test result.</p></li>
</ul>

<p>The following example demonstrates how to allow only DockPosition.Bottom for the MainDocumentContainer:</p>

<h4><strong>[C#] Handling DragDropService events</strong></h4>

<pre><code>        private void InitDragDropEvents()
        {
            DragDropService service = this.radDock1.GetService&lt;DragDropService&gt;();
            service.PreviewDockPosition += new DragDropDockPositionEventHandler(service_PreviewDockPosition);
        }

        private void service_PreviewDockPosition(object sender, DragDropDockPositionEventArgs e)
        {
            if (e.DropTarget == this.radDock1.MainDocumentContainer)
            {
                e.AllowedDockPosition = AllowedDockPosition.Bottom;
            }
        }
</code></pre>

<h4><strong>[VB.NET] Handling DragDropService events</strong></h4>

<pre><code>    Private Sub InitDragDropEvents()
        Dim service As DragDropService = Me.RadDock1.GetService(Of DragDropService)()
        AddHandler service.PreviewDockPosition, AddressOf service_PreviewDockPosition
    End Sub

    Private Sub service_PreviewDockPosition(ByVal sender As Object, ByVal e As DragDropDockPositionEventArgs)
        If e.DropTarget Is Me.RadDock1.MainDocumentContainer Then
            e.AllowedDockPosition = AllowedDockPosition.Bottom
        End If
    End Sub
</code></pre>

<p><img src="images/dock-architecture-and-features-using-the-dragdropservice003.png" alt="dock-architecture-and-features-using-the-dragdropservice 003"></p>

<p><em>Only DockPosition.Bottom is allowed for the MainDocumentContainer.</em></p>

<h2 id="allowed-dock-manager-edges"><a href="#allowed-dock-manager-edges">Allowed Dock Manager Edges</a></h2>

<p>The service may be told which edges of the owning RadDock instance are allowed for dock operation. The following example demonstrates how to set only left and right edges as allowed:</p>

<h4><strong>[C#] Setting AllowedDockManagerEdges</strong></h4>

<pre><code>        private void InitDragDropProperties()
        {
            DragDropService service = this.radDock1.GetService&lt;DragDropService&gt;();
            service.AllowedDockManagerEdges = AllowedDockPosition.Left | AllowedDockPosition.Right;
        }
</code></pre>

<h4><strong>[VB.NET] Setting AllowedDockManagerEdges</strong></h4>

<pre><code>    Private Sub InitDragDropProperties()
        Dim service As DragDropService = Me.RadDock1.GetService(Of DragDropService)()
        service.AllowedDockManagerEdges = AllowedDockPosition.Left Or AllowedDockPosition.Right
    End Sub
</code></pre>

<p><img src="images/dock-architecture-and-features-using-the-dragdropservice004.png" alt="dock-architecture-and-features-using-the-dragdropservice 004"></p>

<p><em>Only DockPosition.Top and DockPosition.Bottom are available for the DragDropService.</em></p>
        </article>
    </div>	
</div>

<footer>	
    <p><a onclick="javascript:SubmitFeedback('documentation@telerik.com','Telerik UI for WinForms','','','','%0\dYour%20feedback%20is%20used%20to%20improve%20the%20documentation%20and%20the%20product.%20Your%20e-mail%20address%20will%20not%20be%20used%20for%20any%20other%20purpose%20and%20is%20disposed%20of%20after%20the%20issue%20you%20report%20is%20resolved.%20%20While%20working%20to%20resolve%20the%20issue%20that%20you%20report,%20you%20may%20be%20contacted%20via%20e-mail%20to%20get%20further%20details%20or%20clarification%20on%20the%20feedback%20you%20sent.%20After%20the%20issue%20you%20report%20has%20been%20addressed,%20you%20may%20receive%20an%20e-mail%20to%20let%20you%20know%20that%20your%20feedback%20has%20been%20addressed.%0\A%0\d','Customer%20Feedback'); return false;" href="javascript:;" id="send-feedback">Send Feedback</a> Copyright &copy; 2002-<span id="toYear"></span> Telerik. All rights reserved.</p>
</footer>

    </body>
</html>

