<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=9">
        <title>Tutorial Saving and Loading Layout and Content</title>
		
        <link href="/devtools/winforms/favicon.ico?Version=2014" rel="shortcut icon" />
		
        <meta name="description" content="Tutorial Saving and Loading Layout and Content">
        <link href="http://cdn.kendostatic.com/2014.2.716/styles/kendo.common.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="/devtools/winforms/assets/styles-0b5a71aa940403cb3ac60d7e91e25e1d.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/theme-52ac78f88dc084a004a9f7d63a3c4245.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/branding-fafb6ed99bf90d251675534381e6f139.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/highlight-49ceada082f1c903edb130c25d09cf1f.css">
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://cdn.kendostatic.com/2014.2.716/js/kendo.web.min.js"></script>
        <script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/app-6da8e8e1ef6e19ee4a020ec34f48078c.js"></script>
		<script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/branding-59377013fb75f02a1dbffd638033ef6d.js"></script>
		<script src="/devtools/winforms/assets/feedback-76cd418a099f8d21592f412fb4a31191.js"></script>
		
		<!--[if lt IE 9]>
		<script>
		document.createElement('header');
		document.createElement('nav');
		document.createElement('section');
		document.createElement('article');
		document.createElement('aside');
		document.createElement('footer');
		document.createElement('hgroup');
		</script>
		<![endif]-->
    </head>
    <body class="faux-columns">
        <!-- Google Tag Manager -->
        <noscript>
            <iframe src="//www.googletagmanager.com/ns.html?id=GTM-6X92" height="0" width="0" style="display: none; visibility: hidden"></iframe>
        </noscript>
        <script>(function(w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-6X92');</script>
        <!-- End Google Tag Manager -->
        <header id="page-header">
			<span class="toggle-nav"><span></span></span>
            


<div id="page-search">
	<script>
  (function() {
    var cx = '001595215763381649090:jt1stbj813w';
    var gcse = document.createElement('script');
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

</div>

<span class="show-search">
	<span class="k-icon k-i-search"></span>
</span>

<div class="nav-buttons">


</div>





        </header>

        <div id="page-inner-content">
    <div id="page-nav">
        <div id="page-tree"></div>
        <script>
			$("#page-tree").kendoTreeView({
				dataSource: {
					transport: {
						read: {
							url: "/devtools/winforms/default.json",
							dataType: "json"
						}
					},
					schema: {
						model: {
							id: "path",
							children: "items",
							hasChildren: "items"
						}
					}
				},
				select: preventParentSelection,
				template: navigationTemplate("/devtools/winforms/"),
				dataBound: expandNavigation("dock/loading-and-saving-layouts/tutorial-saving-and-loading-layout-content.html")
			});
        </script>
		<div id="page-api" class="k-treeview">
			<ul class="k-group">
				<li class="k-item">
					<span class="k-icon k-plus" role="presentation"></span>
					<span class="k-in">
						<a href="/devtools/winforms/api/" target="_blank">API Reference</a>
					</span>
				</li>
			</ul>
		</div>			
    </div>
	<a id="page-edit-link" class="btn btn-action" href="https://github.com/telerik/xaml-docs/edit/master/dock/loading-and-saving-layouts/tutorial-saving-and-loading-layout-content.md">Edit this page</a>
    <div id="page-article">       
        <article>
            <h1 id="tutorial-saving-and-loading-layout-and-content"><a href="#tutorial-saving-and-loading-layout-and-content">Tutorial: Saving and Loading Layout and Content</a></h1>

<p>As stated in <a href="/devtools/winforms/dock/loading-and-saving-layouts/loading-and-saving-layouts">this documentation article</a> RadDock can save and then load the layout of its DockWindows.<br>
        However, this mechanism does not save the content of these windows. The purpose of this article is to demonstrate<br>
        what approach you should follow when you want to restore not only the layout of the DockWindows,<br>
        but their content as well.</p>

<h2 id="example-saving-and-loading-layout-and-content"><a href="#example-saving-and-loading-layout-and-content">Example: Saving and Loading layout and content</a></h2>

<ol>
<li><p>Usually, each DockWindow contains a set of controls. To make the task of saving and loading the content easier, let's put this content in UserControls, for example:<br>
        <img src="images/dock-loading-and-saving-layouts-tutorial-saving-and-loading-layout-content001.png" alt="dock-loading-and-saving-layouts-tutorial-saving-and-loading-layout-content 001"><img src="images/dock-loading-and-saving-layouts-tutorial-saving-and-loading-layout-content002.png" alt="dock-loading-and-saving-layouts-tutorial-saving-and-loading-layout-content 002"><img src="images/dock-loading-and-saving-layouts-tutorial-saving-and-loading-layout-content003.png" alt="dock-loading-and-saving-layouts-tutorial-saving-and-loading-layout-content 003"><em>Three UserControls containing different controls.</em></p></li>
<li><p>Then, let's define the path to the xml file where we will save our layout:</p></li>
</ol>

<h4><strong>[C#]</strong></h4>

<pre><code>        private string dockLayoutPath = Application.StartupPath + "\\dock.xml";
</code></pre>

<h4><strong>[VB.NET]</strong></h4>

<pre><code>    Private dockLayoutPath As String = Application.StartupPath &amp; "\dock.xml"
    '#End Region

    Public Sub New()
        InitializeComponent()

        '#Region "saveLayout"
        Me.RadDock1.SaveToXml("c:\layout1.xml")
        '#End Region

        '#Region "loadLayout"
        Me.RadDock1.LoadFromXml("c:\layout1.xml")
        '#End Region

        AddHandler Load, AddressOf MainForm_Load
        AddHandler FormClosing, AddressOf MainForm_FormClosing
    End Sub

    '#Region "formLoad"
    Private Sub MainForm_Load(ByVal sender As Object, ByVal e As EventArgs)
        If Not File.Exists(dockLayoutPath) Then
            InitializeLayout()
        Else
            Me.RadDock1.LoadFromXml(dockLayoutPath)
            LoadContent()
        End If
    End Sub

    Private Sub InitializeLayout()
        Me.RadDock1.MainDocumentContainerVisible = False

        Dim afW As HostWindow = Me.RadDock1.DockControl(New AvailableFlights(), DockPosition.Left)
        afW.Text = "Available Flights"
        Dim bfW As HostWindow = Me.RadDock1.DockControl(New BookFlight(), DockPosition.Left)
        bfW.Text = "Book a Flight"
        Dim fsW As HostWindow = Me.RadDock1.DockControl(New FlightsSummary(), DockPosition.Left)
        fsW.Text = "Flight Summary"
    End Sub
    '#End Region

    '#Region "formClosing"
    Private Sub MainForm_FormClosing(ByVal sender As Object, ByVal e As FormClosingEventArgs)
        Me.RadDock1.SaveToXml(dockLayoutPath)
    End Sub
    '#End Region

    '#Region "loadContent"
    Private Sub LoadContent()
        For i As Integer = 0 To Me.RadDock1.DockWindows.Count - 1
            Dim hw As HostWindow = TryCast(Me.RadDock1.DockWindows(i), HostWindow)
            If hw IsNot Nothing Then
                If hw.Name.StartsWith("Available") Then
                    hw.LoadContent(New AvailableFlights())
                    hw.Text = "Available Flights"
                End If

                If hw.Name.StartsWith("Book") Then
                    hw.LoadContent(New BookFlight())
                    hw.Text = "Book a Flight"
                End If

                If hw.Name.StartsWith("Flight") Then
                    hw.LoadContent(New FlightsSummary())
                    hw.Text = "Flight Summary"
                End If
            End If
        Next i
    End Sub
    '#End Region
    '#Region "Serializing"
    Private Sub radDock1_DockWindowSerializing(ByVal sender As Object, ByVal e As DockWindowCancelEventArgs)
        If e.NewWindow.Text = "Window Top" Then
            e.Cancel = True
        End If
    End Sub
    '#End Region
End Class
</code></pre>

<ol>
<li>At the Load event of our form we will check if the xml file with the saved layout exists.
          If the file exists at the specified location, we will load the layout as shown in the next paragraphs.
          If it does not exists, we will create a generic layout in RadDock loading our user controls:</li>
</ol>

<h4><strong>[C#]</strong></h4>

<pre><code>        private void MainForm_Load(object sender, EventArgs e)
        {
            if (!File.Exists(dockLayoutPath))
            {
                InitializeLayout();
            }
            else
            {
                this.radDock1.LoadFromXml(dockLayoutPath);
                LoadContent();
            }
        }

        private void InitializeLayout()
        {
            this.radDock1.MainDocumentContainerVisible = false;

            HostWindow afW = this.radDock1.DockControl(new AvailableFlights(), DockPosition.Left);
            afW.Text = "Available Flights";
            HostWindow bfW = this.radDock1.DockControl(new BookFlight(), DockPosition.Left);
            bfW.Text = "Book a Flight";
            HostWindow fsW = this.radDock1.DockControl(new FlightsSummary(), DockPosition.Left);
            fsW.Text = "Flight Summary";
        }
</code></pre>

<h4><strong>[VB.NET]</strong></h4>

<pre><code>    Private Sub MainForm_Load(ByVal sender As Object, ByVal e As EventArgs)
        If Not File.Exists(dockLayoutPath) Then
            InitializeLayout()
        Else
            Me.RadDock1.LoadFromXml(dockLayoutPath)
            LoadContent()
        End If
    End Sub

    Private Sub InitializeLayout()
        Me.RadDock1.MainDocumentContainerVisible = False

        Dim afW As HostWindow = Me.RadDock1.DockControl(New AvailableFlights(), DockPosition.Left)
        afW.Text = "Available Flights"
        Dim bfW As HostWindow = Me.RadDock1.DockControl(New BookFlight(), DockPosition.Left)
        bfW.Text = "Book a Flight"
        Dim fsW As HostWindow = Me.RadDock1.DockControl(New FlightsSummary(), DockPosition.Left)
        fsW.Text = "Flight Summary"
    End Sub
    '#End Region

    '#Region "formClosing"
    Private Sub MainForm_FormClosing(ByVal sender As Object, ByVal e As FormClosingEventArgs)
        Me.RadDock1.SaveToXml(dockLayoutPath)
    End Sub
    '#End Region

    '#Region "loadContent"
    Private Sub LoadContent()
        For i As Integer = 0 To Me.RadDock1.DockWindows.Count - 1
            Dim hw As HostWindow = TryCast(Me.RadDock1.DockWindows(i), HostWindow)
            If hw IsNot Nothing Then
                If hw.Name.StartsWith("Available") Then
                    hw.LoadContent(New AvailableFlights())
                    hw.Text = "Available Flights"
                End If

                If hw.Name.StartsWith("Book") Then
                    hw.LoadContent(New BookFlight())
                    hw.Text = "Book a Flight"
                End If

                If hw.Name.StartsWith("Flight") Then
                    hw.LoadContent(New FlightsSummary())
                    hw.Text = "Flight Summary"
                End If
            End If
        Next i
    End Sub
    '#End Region
    '#Region "Serializing"
    Private Sub radDock1_DockWindowSerializing(ByVal sender As Object, ByVal e As DockWindowCancelEventArgs)
        If e.NewWindow.Text = "Window Top" Then
            e.Cancel = True
        End If
    End Sub
    '#End Region
End Class
</code></pre>

<p>Please note that the names of the types of the UserControls are important, because these names will actually<br>
              give the names of the HostWindows that will be created to host the UserControls. The names of the HostWindows<br>
              will be later used during the process of loading the content.<br>
            <img src="images/dock-loading-and-saving-layouts-tutorial-saving-and-loading-layout-content004.png" alt="dock-loading-and-saving-layouts-tutorial-saving-and-loading-layout-content 004"></p>

<ol>
<li><p>Let's now arrange the dock window in a more user friendly way:<img src="images/dock-loading-and-saving-layouts-tutorial-saving-and-loading-layout-content005.png" alt="dock-loading-and-saving-layouts-tutorial-saving-and-loading-layout-content 005"></p></li>
<li><p>Now close the form containing RadDock. The FormClosing event handler is a convenient place to save our layout:</p></li>
</ol>

<h4><strong>[C#]</strong></h4>

<pre><code>        private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
        {
            this.radDock1.SaveToXml(dockLayoutPath);
        }
</code></pre>

<h4><strong>[VB.NET]</strong></h4>

<pre><code>    Private Sub MainForm_FormClosing(ByVal sender As Object, ByVal e As FormClosingEventArgs)
        Me.RadDock1.SaveToXml(dockLayoutPath)
    End Sub
    '#End Region

    '#Region "loadContent"
    Private Sub LoadContent()
        For i As Integer = 0 To Me.RadDock1.DockWindows.Count - 1
            Dim hw As HostWindow = TryCast(Me.RadDock1.DockWindows(i), HostWindow)
            If hw IsNot Nothing Then
                If hw.Name.StartsWith("Available") Then
                    hw.LoadContent(New AvailableFlights())
                    hw.Text = "Available Flights"
                End If

                If hw.Name.StartsWith("Book") Then
                    hw.LoadContent(New BookFlight())
                    hw.Text = "Book a Flight"
                End If

                If hw.Name.StartsWith("Flight") Then
                    hw.LoadContent(New FlightsSummary())
                    hw.Text = "Flight Summary"
                End If
            End If
        Next i
    End Sub
    '#End Region
    '#Region "Serializing"
    Private Sub radDock1_DockWindowSerializing(ByVal sender As Object, ByVal e As DockWindowCancelEventArgs)
        If e.NewWindow.Text = "Window Top" Then
            e.Cancel = True
        End If
    End Sub
    '#End Region
End Class
</code></pre>

<ol>
<li><p>Reopen the form. Since the xml file defined at paragraph two now exists, our layout and content will be loaded with the help of the following methods:</p></li>
</ol>

<ul>
<li><p>LoadFromXml - this method will create HostWindows and will arrange them according to the information saved in the xml file.</p></li>
<li><p>LoadContent - this is our custom method which loads the content in the created HostWindows. Note that<br>
              the different user controls are loaded in the appropriate HostWindows depending on the names of these windows.</p></li>
</ul>

<h4><strong>[C#]</strong></h4>

<pre><code>        private void LoadContent()
        {
            for (int i = 0; i &lt; this.radDock1.DockWindows.Count; i++)
            {
                HostWindow hw = this.radDock1.DockWindows[i] as HostWindow;
                if (hw != null)
                {
                    if (hw.Name.StartsWith("Available"))
                    {
                        hw.LoadContent(new AvailableFlights());
                        hw.Text = "Available Flights";
                    }

                    if (hw.Name.StartsWith("Book"))
                    {
                        hw.LoadContent(new BookFlight());
                        hw.Text = "Book a Flight";
                    }

                    if (hw.Name.StartsWith("Flight"))
                    {
                        hw.LoadContent(new FlightsSummary());
                        hw.Text = "Flight Summary";
                    }
                }
            }
        }
</code></pre>

<h4><strong>[VB.NET]</strong></h4>

<pre><code>    Private Sub LoadContent()
        For i As Integer = 0 To Me.RadDock1.DockWindows.Count - 1
            Dim hw As HostWindow = TryCast(Me.RadDock1.DockWindows(i), HostWindow)
            If hw IsNot Nothing Then
                If hw.Name.StartsWith("Available") Then
                    hw.LoadContent(New AvailableFlights())
                    hw.Text = "Available Flights"
                End If

                If hw.Name.StartsWith("Book") Then
                    hw.LoadContent(New BookFlight())
                    hw.Text = "Book a Flight"
                End If

                If hw.Name.StartsWith("Flight") Then
                    hw.LoadContent(New FlightsSummary())
                    hw.Text = "Flight Summary"
                End If
            End If
        Next i
    End Sub
    '#End Region
    '#Region "Serializing"
    Private Sub radDock1_DockWindowSerializing(ByVal sender As Object, ByVal e As DockWindowCancelEventArgs)
        If e.NewWindow.Text = "Window Top" Then
            e.Cancel = True
        End If
    End Sub
    '#End Region
End Class
</code></pre>

<p>As a result we get the layout shown on the screenshot below:<br>
        <img src="images/dock-loading-and-saving-layouts-tutorial-saving-and-loading-layout-content005.png" alt="dock-loading-and-saving-layouts-tutorial-saving-and-loading-layout-content 005"></p>

<table>
<th></th>
<tr>
<td>

RELATED VIDEOS</td>
<td></td>
</tr>
<tr>
<td>

[Saving and Loading RadDock for WinForms Layouts](http://tv.telerik.com/winforms/raddock/saving-and-loading-raddock-winforms-layouts)

In this video, you will learn how to use the simple XML serialization features of RadDock for WinForms to easily save and load RadDock layouts. (Runtime: 07:03)
                </td>
<td>![dock-loading-and-saving-layouts 001](images/dock-loading-and-saving-layouts001.png)</td>
</tr>
</table>
        </article>
    </div>	
</div>

<footer>	
    <p><a onclick="javascript:SubmitFeedback('documentation@telerik.com','Telerik UI for WinForms','','','','%0\dYour%20feedback%20is%20used%20to%20improve%20the%20documentation%20and%20the%20product.%20Your%20e-mail%20address%20will%20not%20be%20used%20for%20any%20other%20purpose%20and%20is%20disposed%20of%20after%20the%20issue%20you%20report%20is%20resolved.%20%20While%20working%20to%20resolve%20the%20issue%20that%20you%20report,%20you%20may%20be%20contacted%20via%20e-mail%20to%20get%20further%20details%20or%20clarification%20on%20the%20feedback%20you%20sent.%20After%20the%20issue%20you%20report%20has%20been%20addressed,%20you%20may%20receive%20an%20e-mail%20to%20let%20you%20know%20that%20your%20feedback%20has%20been%20addressed.%0\A%0\d','Customer%20Feedback'); return false;" href="javascript:;" id="send-feedback">Send Feedback</a> Copyright &copy; 2002-<span id="toYear"></span> Telerik. All rights reserved.</p>
</footer>

    </body>
</html>

