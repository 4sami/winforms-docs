<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=9">
        <title>Custom Nodes</title>
		
        <link href="/devtools/winforms/favicon.ico?Version=2014" rel="shortcut icon" />
		
        <meta name="description" content="Custom Nodes">
        <link href="http://cdn.kendostatic.com/2014.2.716/styles/kendo.common.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="/devtools/winforms/assets/styles-0b5a71aa940403cb3ac60d7e91e25e1d.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/theme-52ac78f88dc084a004a9f7d63a3c4245.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/branding-fafb6ed99bf90d251675534381e6f139.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/highlight-49ceada082f1c903edb130c25d09cf1f.css">
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://cdn.kendostatic.com/2014.2.716/js/kendo.web.min.js"></script>
        <script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/app-6da8e8e1ef6e19ee4a020ec34f48078c.js"></script>
		<script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/branding-59377013fb75f02a1dbffd638033ef6d.js"></script>
		<script src="/devtools/winforms/assets/feedback-76cd418a099f8d21592f412fb4a31191.js"></script>
		
		<!--[if lt IE 9]>
		<script>
		document.createElement('header');
		document.createElement('nav');
		document.createElement('section');
		document.createElement('article');
		document.createElement('aside');
		document.createElement('footer');
		document.createElement('hgroup');
		</script>
		<![endif]-->
    </head>
    <body class="faux-columns">
        <!-- Google Tag Manager -->
        <noscript>
            <iframe src="//www.googletagmanager.com/ns.html?id=GTM-6X92" height="0" width="0" style="display: none; visibility: hidden"></iframe>
        </noscript>
        <script>(function(w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-6X92');</script>
        <!-- End Google Tag Manager -->
        <header id="page-header">
			<span class="toggle-nav"><span></span></span>
            


<div id="page-search">
	<script>
  (function() {
    var cx = '001595215763381649090:jt1stbj813w';
    var gcse = document.createElement('script');
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

</div>

<span class="show-search">
	<span class="k-icon k-i-search"></span>
</span>

<div class="nav-buttons">


</div>





        </header>

        <div id="page-inner-content">
    <div id="page-nav">
        <div id="page-tree"></div>
        <script>
			$("#page-tree").kendoTreeView({
				dataSource: {
					transport: {
						read: {
							url: "/devtools/winforms/default.json",
							dataType: "json"
						}
					},
					schema: {
						model: {
							id: "path",
							children: "items",
							hasChildren: "items"
						}
					}
				},
				select: preventParentSelection,
				template: navigationTemplate("/devtools/winforms/"),
				dataBound: expandNavigation("treeview/working-with-nodes/custom-nodes.html")
			});
        </script>
		<div id="page-api" class="k-treeview">
			<ul class="k-group">
				<li class="k-item">
					<span class="k-icon k-plus" role="presentation"></span>
					<span class="k-in">
						<a href="/devtools/winforms/api/" target="_blank">API Reference</a>
					</span>
				</li>
			</ul>
		</div>			
    </div>
	<a id="page-edit-link" class="btn btn-action" href="https://github.com/telerik/xaml-docs/edit/master/treeview/working-with-nodes/custom-nodes.md">Edit this page</a>
    <div id="page-article">       
        <article>
            <h1 id="custom-nodes"><a href="#custom-nodes">Custom Nodes</a></h1>

<p>With <strong>RadTreeView</strong> you can create custom nodes and display them instead of the default ones. This can be done by creating a custom <strong>TreeNodeElement</strong>, which will replace the default one in the <strong>CreateNodeElement</strong> event handler. This article demonstrates how this approach can be implemented.<br>
        <img src="images/treeview-working-with-nodes-custom-nodes001.png" alt="treeview-working-with-nodes-custom-nodes 001"></p>

<blockquote>
<p>To create this example you can first prepare a project by following the steps in <a href="/devtools/winforms/treeview/data-binding/binding-to-database-data">this article</a></p>
</blockquote>

<ol>
<li>First we can create a custom <strong>TreeNodeContentElement</strong> class which contains the main elements for the custom node. These elements are created and initialized in the <strong>CreateChildElements</strong> method. Also the <strong>Synchronize</strong> method is overridden for setting the elements properties in accordance with the corresponding data:</li>
</ol>

<h4><strong>[C#]</strong></h4>

<pre><code>    class CustomContentElement : TreeNodeContentElement
    {
        StackLayoutElement nodeContentContainer;
        LinePrimitive lineElement;
        LightVisualElement textElement;
        RadButtonElement buttonElement;

        protected override Type ThemeEffectiveType
        {
            get
            {
                return typeof(TreeNodeContentElement);
            }
        }
        protected override void InitializeFields()
        {
            base.InitializeFields();
            this.DrawBorder = true;
            this.NumberOfColors = 2;
            this.GradientStyle = GradientStyles.Linear;
            this.Margin = new Padding(5, 5, 5, 5);
            this.Shape = new RoundRectShape(2);
            this.StretchHorizontally = true;
        }

        public override void Synchronize()
        {
            this.DrawFill = true;

            TreeNodeElement treeNodeElement = this.NodeElement;
            RadTreeNode node = treeNodeElement.Data;
            DataRowView rowView = (DataRowView)node.DataBoundItem;

            if (node.Level == 0)
            {
                this.textElement.Text = "" + rowView["ArtistName"];
                if (node.Expanded == false)
                {
                    buttonElement.Text = "Show Albums";
                }
                else
                {
                    buttonElement.Text = "Hide Albums";
                }

                this.BorderColor = Color.FromArgb(110, 153, 210);
                this.BackColor = Color.FromArgb(174, 190, 217);
                this.BackColor2 = Color.FromArgb(168, 183, 210);
            }
            else if (node.Level == 1)
            {
                this.textElement.Text = "" + rowView["AlbumName"];
                this.buttonElement.Text = "Play Album";

                this.BorderColor = Color.FromArgb(210, 153, 210);
                this.BackColor = Color.FromArgb(74, 190, 217);
                this.BackColor2 = Color.FromArgb(50, 150, 190);
            }
            else
            {
                this.textElement.Text = "" + rowView["SongName"];
                this.buttonElement.Text = "Play Song";

                this.BorderColor = Color.FromArgb(110, 153, 110);
                this.BackColor = Color.FromArgb(234, 190, 117);
                this.BackColor2 = Color.FromArgb(208, 183, 110);
            }
        }

        protected override void CreateChildElements()
        {
            nodeContentContainer = new StackLayoutElement();
            nodeContentContainer.Orientation = Orientation.Vertical;
            nodeContentContainer.StretchHorizontally = true;
            nodeContentContainer.StretchVertically = false;

            textElement = new LightVisualElement();
            textElement.ShouldHandleMouseInput = false;
            textElement.NotifyParentOnMouseInput = true;
            textElement.StretchVertically = false;
            this.nodeContentContainer.Children.Add(textElement);

            lineElement = new LinePrimitive();
            lineElement.BackColor = Color.Black;
            lineElement.Margin = new Padding(10, 0, 10, 0);
            lineElement.StretchVertically = false;
            this.nodeContentContainer.Children.Add(lineElement);

            buttonElement = new RadButtonElement();
            buttonElement.Margin = new Padding(20, 3, 20, 3);
            buttonElement.Click += buttonElement_Click;
            buttonElement.StretchVertically = false;
            this.nodeContentContainer.Children.Add(buttonElement);

            this.Children.Add(nodeContentContainer);

        }

        void buttonElement_Click(object sender, EventArgs e)
        {
            TreeNodeElement treeNodeElement = this.NodeElement;
            RadTreeNode node = treeNodeElement.Data;
            if (node.Level == 0)
            {
                if (node.Expanded == true)
                {
                    node.Collapse();
                    buttonElement.Text = "Show Albums";
                }
                else
                {
                    node.Expand();
                    buttonElement.Text = "Hide Albums";
                }
            }
        }
    }
</code></pre>

<h4><strong>[VB.NET]</strong></h4>

<pre><code>Class CustomContentElement
    Inherits TreeNodeContentElement
    Private nodeContentContainer As StackLayoutElement
    Private lineElement As LinePrimitive
    Private textElement As LightVisualElement
    Private buttonElement As RadButtonElement

    Protected Overrides ReadOnly Property ThemeEffectiveType() As Type
        Get
            Return GetType(TreeNodeContentElement)
        End Get
    End Property

    Protected Overrides Sub InitializeFields()
        MyBase.InitializeFields()
        Me.DrawBorder = True
        Me.NumberOfColors = 2
        Me.GradientStyle = GradientStyles.Linear
        Me.Margin = New Padding(5, 5, 5, 5)
        Me.Shape = New RoundRectShape(2)
        Me.StretchHorizontally = True
    End Sub

    Public Overrides Sub Synchronize()
        Me.DrawFill = True

        Dim treeNodeElement As TreeNodeElement = Me.NodeElement
        Dim node As RadTreeNode = treeNodeElement.Data
        Dim rowView As DataRowView = DirectCast(node.DataBoundItem, DataRowView)

        If node.Level = 0 Then
            Me.textElement.Text = rowView("ArtistName")
            If node.Expanded = False Then
                buttonElement.Text = "Show Albums"
            Else
                buttonElement.Text = "Hide Albums"
            End If

            Me.BorderColor = Color.FromArgb(110, 153, 210)
            Me.BackColor = Color.FromArgb(174, 190, 217)
            Me.BackColor2 = Color.FromArgb(168, 183, 210)
        ElseIf node.Level = 1 Then
            Me.textElement.Text = rowView("AlbumName")
            Me.buttonElement.Text = "Play Album"

            Me.BorderColor = Color.FromArgb(210, 153, 210)
            Me.BackColor = Color.FromArgb(74, 190, 217)
            Me.BackColor2 = Color.FromArgb(50, 150, 190)
        Else
            Me.textElement.Text = rowView("SongName")
            Me.buttonElement.Text = "Play Song"

            Me.BorderColor = Color.FromArgb(110, 153, 110)
            Me.BackColor = Color.FromArgb(234, 190, 117)
            Me.BackColor2 = Color.FromArgb(208, 183, 110)
        End If
    End Sub

    Protected Overrides Sub CreateChildElements()
        nodeContentContainer = New StackLayoutElement()
        nodeContentContainer.Orientation = Orientation.Vertical
        nodeContentContainer.StretchHorizontally = True
        nodeContentContainer.StretchVertically = False

        textElement = New LightVisualElement()
        textElement.ShouldHandleMouseInput = False
        textElement.NotifyParentOnMouseInput = True
        textElement.StretchVertically = False
        Me.nodeContentContainer.Children.Add(textElement)

        lineElement = New LinePrimitive()
        lineElement.BackColor = Color.Black
        lineElement.Margin = New Padding(10, 0, 10, 0)
        lineElement.StretchVertically = False
        Me.nodeContentContainer.Children.Add(lineElement)

        buttonElement = New RadButtonElement()
        buttonElement.Margin = New Padding(20, 3, 20, 3)
        AddHandler buttonElement.Click, AddressOf buttonElement_Click
        buttonElement.StretchVertically = False
        Me.nodeContentContainer.Children.Add(buttonElement)

        Me.Children.Add(nodeContentContainer)
        Me.Shape = New RoundRectShape(2)
        Me.StretchHorizontally = True
    End Sub

    Private Sub buttonElement_Click(sender As Object, e As EventArgs)
        Dim treeNodeElement As TreeNodeElement = Me.NodeElement
        Dim node As RadTreeNode = treeNodeElement.Data
        If node.Level = 0 Then
            If node.Expanded = True Then
                node.Collapse()
                buttonElement.Text = "Show Albums"
            Else
                node.Expand()
                buttonElement.Text = "Hide Albums"
            End If
        End If
    End Sub
End Class
</code></pre>

<ol>
<li>Now we can use the already created <strong>CustomContentElement</strong> and create a custom <strong>TreeNodeElement</strong> class. Also here the <strong>Synchronize</strong> method is overridden in order to set the picture of the node:</li>
</ol>

<h4><strong>[C#]</strong></h4>

<pre><code>    public class CustomTreeNodeElement : TreeNodeElement
    {

        protected override TreeNodeContentElement CreateContentElement()
        {
            return new CustomContentElement();
        }

        public override void Synchronize()
        {
            base.Synchronize();

            RadTreeNode node = this.Data;
            DataRowView rowView = (DataRowView)node.DataBoundItem;
            if (node.Level != 2)
            {
                this.ImageElement.Image = ImageHelper.GetImageFromBytes((byte[])rowView["Image"]).GetThumbnailImage(50, 50, null, IntPtr.Zero);
            }
            else
            {
                this.ImageElement.Image = Resources.the_music_icon.GetThumbnailImage(50, 50, null, IntPtr.Zero);
            }
        }

        protected override Type ThemeEffectiveType
        {
            get
            {
                return typeof(TreeNodeElement);
            }
        }
    }
</code></pre>

<h4><strong>[VB.NET]</strong></h4>

<pre><code>Public Class CustomTreeNodeElement
    Inherits TreeNodeElement

    Protected Overrides Function CreateContentElement() As TreeNodeContentElement
        Return New CustomContentElement()
    End Function

    Public Overrides Sub Synchronize()
        MyBase.Synchronize()

        Dim node As RadTreeNode = Me.Data
        Dim rowView As DataRowView = DirectCast(node.DataBoundItem, DataRowView)
        If node.Level &lt;&gt; 2 Then
            Me.ImageElement.Image = ImageHelper.GetImageFromBytes(DirectCast(rowView("Image"), Byte())).GetThumbnailImage(50, 50, Nothing, IntPtr.Zero)
        Else
            Me.ImageElement.Image = My.Resources.the_music_icon.GetThumbnailImage(50, 50, Nothing, IntPtr.Zero)
        End If
    End Sub

    Protected Overrides ReadOnly Property ThemeEffectiveType() As Type
        Get
            Return GetType(TreeNodeElement)
        End Get
    End Property
End Class
</code></pre>

<ol>
<li>Finally, we can add a little bit more customization by setting some of the <strong>RadTreeView</strong> properties in the form's Load event handler. And also we need to subscribe to the <strong>CreateNodeElement</strong> event in order to use the newly created custom nodes:</li>
</ol>

<h4><strong>[C#]</strong></h4>

<pre><code>        private void CustomNodes_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'musicCollectionDataSet.Artists' table. You can move, or remove it, as needed.
            this.artistsTableAdapter.Fill(this.musicCollectionDataSet.Artists);
            // TODO: This line of code loads data into the 'musicCollectionDataSet.Albums' table. You can move, or remove it, as needed.
            this.albumsTableAdapter.Fill(this.musicCollectionDataSet.Albums);
            // TODO: This line of code loads data into the 'musicCollectionDataSet.Songs' table. You can move, or remove it, as needed.
            this.songsTableAdapter.Fill(this.musicCollectionDataSet.Songs);

            this.radTreeView1.DataSource = this.artistsBindingSource;
            this.radTreeView1.DisplayMember = "ArtistName";
            this.radTreeView1.ValueMember = "ArtistID";
            this.radTreeView1.RelationBindings.Add(new RelationBinding(this.albumsBindingSource, "AlbumName", "ArtistID", "ArtistID", "AlbumID"));
            this.radTreeView1.RelationBindings.Add(new RelationBinding(this.songsBindingSource, "SongName", "AlbumID", "AlbumID", "SongID"));

            this.radTreeView1.TreeViewElement.CreateNodeElement += TreeViewElement_CreateNodeElement;
            this.radTreeView1.TreeViewElement.AutoSizeItems = true;
            this.radTreeView1.ShowRootLines = false;
            this.radTreeView1.FullRowSelect = false;
            this.radTreeView1.ShowLines = true;
            this.radTreeView1.LineStyle = TreeLineStyle.Solid;
            this.radTreeView1.LineColor = Color.FromArgb(110, 153, 210);
            this.radTreeView1.TreeIndent = 50;
            radTreeView1.TreeViewElement.CollapseImage = Resources.toggle_expand_basic_blue.GetThumbnailImage(20, 20, null, IntPtr.Zero);
            radTreeView1.TreeViewElement.ExpandImage = Resources.toggle_collapse_basic_blue.GetThumbnailImage(20, 20, null, IntPtr.Zero);
            this.radTreeView1.ExpandAll();
        }

        void TreeViewElement_CreateNodeElement(object sender, Telerik.WinControls.UI.CreateTreeNodeElementEventArgs e)
        {
            e.NodeElement = new CustomTreeNodeElement();
        }
</code></pre>

<h4><strong>[VB.NET]</strong></h4>

<pre><code>    Private Sub CustomNodes_Load(sender As Object, e As EventArgs) Handles Me.Load
        Me.ArtistsTableAdapter.Fill(Me.MusicCollectionDataSet.Artists)
        'TODO: This line of code loads data into the 'MusicCollectionDataSet.Songs' table. You can move, or remove it, as needed.
        Me.SongsTableAdapter.Fill(Me.MusicCollectionDataSet.Songs)
        'TODO: This line of code loads data into the 'MusicCollectionDataSet.Albums' table. You can move, or remove it, as needed.
        Me.AlbumsTableAdapter.Fill(Me.MusicCollectionDataSet.Albums)
        'TODO: This line of code loads data into the 'MusicCollectionDataSet.Artists' table. You can move, or remove it, as needed.

        Me.RadTreeView1.DataSource = Me.ArtistsBindingSource
        Me.RadTreeView1.DisplayMember = "ArtistName"
        Me.RadTreeView1.ValueMember = "ArtistID"
        Me.RadTreeView1.RelationBindings.Add(New RelationBinding(Me.AlbumsBindingSource, "AlbumName", "ArtistID", "ArtistID", "AlbumID"))
        Me.RadTreeView1.RelationBindings.Add(New RelationBinding(Me.SongsBindingSource, "SongName", "AlbumID", "AlbumID", "SongID"))

        AddHandler Me.RadTreeView1.TreeViewElement.CreateNodeElement, AddressOf TreeViewElement_CreateNodeElement
        Me.RadTreeView1.TreeViewElement.AutoSizeItems = True
        Me.RadTreeView1.ShowRootLines = False
        Me.RadTreeView1.TreeIndent = 50
        Me.RadTreeView1.FullRowSelect = False
        Me.RadTreeView1.ShowLines = True
        Me.RadTreeView1.LineStyle = TreeLineStyle.Solid
        Me.RadTreeView1.LineColor = Color.FromArgb(110, 153, 210)
        RadTreeView1.TreeViewElement.CollapseImage = My.Resources.toggle_expand_basic_blue.GetThumbnailImage(20, 20, Nothing, IntPtr.Zero)
        RadTreeView1.TreeViewElement.ExpandImage = My.Resources.toggle_collapse_basic_blue.GetThumbnailImage(20, 20, Nothing, IntPtr.Zero)
        Me.RadTreeView1.ExpandAll()
    End Sub

    Private Sub TreeViewElement_CreateNodeElement(sender As Object, e As Telerik.WinControls.UI.CreateTreeNodeElementEventArgs)
        e.NodeElement = New CustomTreeNodeElement()
    End Sub
</code></pre>
        </article>
    </div>	
</div>

<footer>	
    <p><a onclick="javascript:SubmitFeedback('documentation@telerik.com','Telerik UI for WinForms','','','','%0\dYour%20feedback%20is%20used%20to%20improve%20the%20documentation%20and%20the%20product.%20Your%20e-mail%20address%20will%20not%20be%20used%20for%20any%20other%20purpose%20and%20is%20disposed%20of%20after%20the%20issue%20you%20report%20is%20resolved.%20%20While%20working%20to%20resolve%20the%20issue%20that%20you%20report,%20you%20may%20be%20contacted%20via%20e-mail%20to%20get%20further%20details%20or%20clarification%20on%20the%20feedback%20you%20sent.%20After%20the%20issue%20you%20report%20has%20been%20addressed,%20you%20may%20receive%20an%20e-mail%20to%20let%20you%20know%20that%20your%20feedback%20has%20been%20addressed.%0\A%0\d','Customer%20Feedback'); return false;" href="javascript:;" id="send-feedback">Send Feedback</a> Copyright &copy; 2002-<span id="toYear"></span> Telerik. All rights reserved.</p>
</footer>

    </body>
</html>

