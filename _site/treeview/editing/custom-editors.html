<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=9">
        <title>Custom Editors</title>
		
        <link href="/devtools/winforms/favicon.ico?Version=2014" rel="shortcut icon" />
		
        <meta name="description" content="Custom Editors">
        <link href="http://cdn.kendostatic.com/2014.2.716/styles/kendo.common.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="/devtools/winforms/assets/styles-0b5a71aa940403cb3ac60d7e91e25e1d.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/theme-52ac78f88dc084a004a9f7d63a3c4245.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/branding-fafb6ed99bf90d251675534381e6f139.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/highlight-49ceada082f1c903edb130c25d09cf1f.css">
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://cdn.kendostatic.com/2014.2.716/js/kendo.web.min.js"></script>
        <script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/app-6da8e8e1ef6e19ee4a020ec34f48078c.js"></script>
		<script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/branding-59377013fb75f02a1dbffd638033ef6d.js"></script>
		<script src="/devtools/winforms/assets/feedback-76cd418a099f8d21592f412fb4a31191.js"></script>
		
		<!--[if lt IE 9]>
		<script>
		document.createElement('header');
		document.createElement('nav');
		document.createElement('section');
		document.createElement('article');
		document.createElement('aside');
		document.createElement('footer');
		document.createElement('hgroup');
		</script>
		<![endif]-->
    </head>
    <body class="faux-columns">
        <!-- Google Tag Manager -->
        <noscript>
            <iframe src="//www.googletagmanager.com/ns.html?id=GTM-6X92" height="0" width="0" style="display: none; visibility: hidden"></iframe>
        </noscript>
        <script>(function(w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-6X92');</script>
        <!-- End Google Tag Manager -->
        <header id="page-header">
			<span class="toggle-nav"><span></span></span>
            <div id="logo-bar">
	<a href="/devtools/winforms/" title="UI for WinForms">
		<span>UI for WinForms</span>
	</a>
</div> 
<div id="page-search">
	<script>
  (function() {
    var cx = '001595215763381649090:jt1stbj813w';
    var gcse = document.createElement('script');
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

</div>

<span class="show-search">
	<span class="k-icon k-i-search"></span>
</span>

<div class="nav-buttons">
	<a href="http://demos.telerik.com/wpf/" title="WPF Demos" target="_blank" class="btn demos-btn">Demos</a>	
	<a href="http://www.telerik.com/products/wpf/overview.aspx" title="About UI for WPF" target="_blank" class="btn about-btn">About</a>
	<a href="http://www.telerik.com/purchase/individual/wpf.aspx" title="Pricing" target="_blank" class="btn pricing-btn">Pricing</a>
	<a href="http://www.telerik.com/products/wpf/download.aspx" title="Try now" target="_blank" class="btn btn-primary">Try now</a>
</div>





        </header>

        <div id="page-inner-content">
    <div id="page-nav">
        <div id="page-tree"></div>
        <script>
			$("#page-tree").kendoTreeView({
				dataSource: {
					transport: {
						read: {
							url: "/devtools/winforms/default.json",
							dataType: "json"
						}
					},
					schema: {
						model: {
							id: "path",
							children: "items",
							hasChildren: "items"
						}
					}
				},
				select: preventParentSelection,
				template: navigationTemplate("/devtools/winforms/"),
				dataBound: expandNavigation("treeview/editing/custom-editors.html")
			});
        </script>
		<div id="page-api" class="k-treeview">
			<ul class="k-group">
				<li class="k-item">
					<span class="k-icon k-plus" role="presentation"></span>
					<span class="k-in">
						<a href="/devtools/winforms/api/" target="_blank">API Reference</a>
					</span>
				</li>
			</ul>
		</div>			
    </div>
	<a id="page-edit-link" class="btn btn-action" href="https://github.com/telerik/xaml-docs/edit/master/treeview/editing/custom-editors.md">Edit this page</a>
    <div id="page-article">       
        <article>
            <h1 id="custom-editors"><a href="#custom-editors">Custom Editors</a></h1>

<p>By default RadTreeView uses a text box editor for editing the node <strong>Text</strong>. However, you might want to replace the default editor with your own. When an editor is invoked the <strong>EditorRequired</strong> event fires allowing the editor instance to be replaced by a custom one.</p>

<p>Below you will find an example on how to implement a custom editor and use it with RadTreeView.</p>

<p>In this example we will implement an editor, showing a US state name with text and its abbreviation in a drop down next to the text.<br>
        <img src="images/treeview-editing-custom-editors001.png" alt="treeview-editing-custom-editors 001"></p>

<p>Our editor and its element will derive from <strong>BaseTextBoxEditor</strong> and <strong>BaseTextBoxEditorElement</strong> respectively.</p>

<p>In the <strong>EditorElement</strong> we will add a <strong>RadDropDownListElement</strong>. The DropDownList will be bound to the same data source as the RadTreeView control for the purpose of the example follows the EditorElement:</p>

<h4>__[C#] __</h4>

<pre><code>    public class CustomRadTreeViewEditorElement : BaseTextBoxEditorElement
    {
        private RadDropDownListElement dropDownList;
        private DockLayoutPanel dockPanel;

        public RadDropDownListElement DropDownList
        {
            get { return this.dropDownList; }
        }

        protected override void OnLoaded() //use OnLoaded as here the text editor will exist
        {
            base.OnLoaded();

            if (this.Children.Contains(this.TextBoxItem))
            {
                this.dropDownList = new RadDropDownListElement();
                this.dropDownList.DropDownStyle = RadDropDownStyle.DropDownList;
                this.dropDownList.MinSize = new Size(55, 0);

                this.dockPanel = new DockLayoutPanel();
                this.dockPanel.LastChildFill = true;
                this.Children.Add(this.dockPanel);

                this.dockPanel.Children.Add(this.dropDownList);
                DockLayoutPanel.SetDock(this.dropDownList, Telerik.WinControls.Layouts.Dock.Right);

                this.Children.Remove(this.TextBoxItem);
                this.dockPanel.Children.Add(this.TextBoxItem);
            }
        }
    }
</code></pre>

<h4>__[VB] __</h4>

<pre><code>Public Class CustomRadTreeViewEditorElement
    Inherits BaseTextBoxEditorElement
    Private m_dropDownList As RadDropDownListElement
    Private dockPanel As DockLayoutPanel

    Public ReadOnly Property DropDownList() As RadDropDownListElement
        Get
            Return Me.m_dropDownList
        End Get
    End Property

    Protected Overrides Sub OnLoaded()
        'use OnLoaded as here the text editor will exist
        MyBase.OnLoaded()

        If Me.Children.Contains(Me.TextBoxItem) Then
            Me.m_dropDownList = New RadDropDownListElement()
            Me.m_dropDownList.DropDownStyle = RadDropDownStyle.DropDownList
            Me.m_dropDownList.MinSize = New Size(55, 0)

            Me.dockPanel = New DockLayoutPanel()
            Me.dockPanel.LastChildFill = True
            Me.Children.Add(Me.dockPanel)

            Me.dockPanel.Children.Add(Me.m_dropDownList)
            DockLayoutPanel.SetDock(Me.m_dropDownList, Telerik.WinControls.Layouts.Dock.Right)

            Me.Children.Remove(Me.TextBoxItem)
            Me.dockPanel.Children.Add(Me.TextBoxItem)
        End If
    End Sub
End Class
</code></pre>

<p>The <strong>EditorElement</strong> encapsulates the visual appearance of the element, we will need the actual editor which will encapsulate the functionality:</p>

<h4>__[C#] __</h4>

<pre><code>    public class CustomRadTreeViewEditor : BaseTextBoxEditor
    {
        protected override RadElement CreateEditorElement()
        {
            return new CustomRadTreeViewEditorElement();
        }

        public new CustomRadTreeViewEditorElement EditorElement
        {
            get { return base.EditorElement as CustomRadTreeViewEditorElement; }
        }

        public override bool EndEdit()
        {
            this.EditorElement.DropDownList.SelectedValueChanged -= DropDownList_SelectedIndexChanged;
            return base.EndEdit();
        }

        public override void BeginEdit()
        {
            base.BeginEdit();

            TreeNodeElement nodeElement = this.OwnerElement as TreeNodeElement;

            this.EditorElement.DropDownList.BindingContext = new BindingContext();
            this.EditorElement.DropDownList.DataSource = nodeElement.TreeViewElement.DataSource;
            this.EditorElement.DropDownList.DisplayMember = nodeElement.TreeViewElement.ValueMember;
            this.EditorElement.DropDownList.ValueMember = nodeElement.TreeViewElement.DisplayMember;
            this.EditorElement.DropDownList.SelectedIndex = this.EditorElement.DropDownList.FindStringExact(nodeElement.Data.Value.ToString());

            this.Value = nodeElement.Data.Text;
            this.EditorElement.DropDownList.SelectedIndexChanged += DropDownList_SelectedIndexChanged;
        }

        void DropDownList_SelectedIndexChanged(object sender, Telerik.WinControls.UI.Data.PositionChangedEventArgs e)
        {
            TreeNodeElement nodeElement = this.OwnerElement as TreeNodeElement;
            nodeElement.Data.Value = this.EditorElement.DropDownList.Items[e.Position].Text;
            this.Value = this.EditorElement.DropDownList.Items[e.Position].Value;
        }

    }
</code></pre>

<h4>__[VB] __</h4>

<pre><code>Public Class CustomRadTreeViewEditor
    Inherits BaseTextBoxEditor
    Protected Overrides Function CreateEditorElement() As RadElement
        Return New CustomRadTreeViewEditorElement()
    End Function

    Public Shadows ReadOnly Property EditorElement() As CustomRadTreeViewEditorElement
        Get
            Return TryCast(MyBase.EditorElement, CustomRadTreeViewEditorElement)
        End Get
    End Property

    Public Overrides Function EndEdit() As Boolean
        RemoveHandler Me.EditorElement.DropDownList.SelectedValueChanged, AddressOf DropDownList_SelectedIndexChanged
        Return MyBase.EndEdit()
    End Function

    Public Overrides Sub BeginEdit()
        MyBase.BeginEdit()

        Dim nodeElement As TreeNodeElement = TryCast(Me.OwnerElement, TreeNodeElement)

        Me.EditorElement.DropDownList.BindingContext = New BindingContext()
        Me.EditorElement.DropDownList.DataSource = nodeElement.TreeViewElement.DataSource
        Me.EditorElement.DropDownList.DisplayMember = nodeElement.TreeViewElement.ValueMember
        Me.EditorElement.DropDownList.ValueMember = nodeElement.TreeViewElement.DisplayMember
        Me.EditorElement.DropDownList.SelectedIndex = Me.EditorElement.DropDownList.FindStringExact(nodeElement.Data.Value.ToString())

        Me.Value = nodeElement.Data.Text
        AddHandler Me.EditorElement.DropDownList.SelectedIndexChanged, AddressOf DropDownList_SelectedIndexChanged
    End Sub

    Private Sub DropDownList_SelectedIndexChanged(sender As Object, e As Telerik.WinControls.UI.Data.PositionChangedEventArgs)
        Dim nodeElement As TreeNodeElement = TryCast(Me.OwnerElement, TreeNodeElement)
        nodeElement.Data.Value = Me.EditorElement.DropDownList.Items(e.Position).Text
        Me.Value = Me.EditorElement.DropDownList.Items(e.Position).Value
    End Sub

End Class
</code></pre>

<p>Now all that is left is to drag a RadTreeView to a form, populate it with data and enable the custom editor.</p>

<h4>__[C#] __</h4>

<pre><code>        public EditingNodes()
        {
            InitializeComponent();

            DataTable table = new DataTable();
            table.Columns.Add("Abbreviation");
            table.Columns.Add("State");

            table.Rows.Add("AL", "Alabama");
            table.Rows.Add("AK", "Alaska");
            table.Rows.Add("AZ", "Arizona");
            table.Rows.Add("AR", "Arkansas");
            table.Rows.Add("CA", "California");
            table.Rows.Add("CO", "Colorado");
            table.Rows.Add("CT", "Connecticut");

            this.Controls.Add(this.radTreeView1);
            this.radTreeView1.AllowEdit = true;
            this.radTreeView1.DataSource = table;
            this.radTreeView1.DisplayMember = "State";
            this.radTreeView1.ValueMember = "Abbreviation";

            this.radTreeView1.EditorRequired += TreeViewEditorRequired;
        }

        private void TreeViewEditorRequired(object sender, TreeNodeEditorRequiredEventArgs e)
        {
            e.EditorType = typeof(CustomRadTreeViewEditor);
        }
</code></pre>

<h4>__[VB] __</h4>

<pre><code>    Public Sub New()
        InitializeComponent()

        Dim table As New DataTable()
        table.Columns.Add("Abbreviation")
        table.Columns.Add("State")

        table.Rows.Add("AL", "Alabama")
        table.Rows.Add("AK", "Alaska")
        table.Rows.Add("AZ", "Arizona")
        table.Rows.Add("AR", "Arkansas")
        table.Rows.Add("CA", "California")
        table.Rows.Add("CO", "Colorado")
        table.Rows.Add("CT", "Connecticut")

        Me.Controls.Add(Me.radTreeView1)
        Me.radTreeView1.AllowEdit = True
        Me.radTreeView1.DataSource = table
        Me.radTreeView1.DisplayMember = "State"
        Me.radTreeView1.ValueMember = "Abbreviation"

        AddHandler Me.radTreeView1.EditorRequired, AddressOf TreeViewEditorRequired
    End Sub

    Private Sub TreeViewEditorRequired(sender As Object, e As TreeNodeEditorRequiredEventArgs)
        e.EditorType = GetType(CustomRadTreeViewEditor)
    End Sub
</code></pre>
        </article>
    </div>	
</div>

<footer>	
    <p><a onclick="javascript:SubmitFeedback('documentation@telerik.com','Telerik UI for WinForms','','','','%0\dYour%20feedback%20is%20used%20to%20improve%20the%20documentation%20and%20the%20product.%20Your%20e-mail%20address%20will%20not%20be%20used%20for%20any%20other%20purpose%20and%20is%20disposed%20of%20after%20the%20issue%20you%20report%20is%20resolved.%20%20While%20working%20to%20resolve%20the%20issue%20that%20you%20report,%20you%20may%20be%20contacted%20via%20e-mail%20to%20get%20further%20details%20or%20clarification%20on%20the%20feedback%20you%20sent.%20After%20the%20issue%20you%20report%20has%20been%20addressed,%20you%20may%20receive%20an%20e-mail%20to%20let%20you%20know%20that%20your%20feedback%20has%20been%20addressed.%0\A%0\d','Customer%20Feedback'); return false;" href="javascript:;" id="send-feedback">Send Feedback</a> Copyright &copy; 2002-<span id="toYear"></span> Telerik. All rights reserved.</p>
</footer>

    </body>
</html>

