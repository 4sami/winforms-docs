<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=9">
        <title>Getting Started</title>
		
        <link href="/devtools/winforms/favicon.ico?Version=2014" rel="shortcut icon" />
		
        <meta name="description" content="Getting Started">
        <link href="http://cdn.kendostatic.com/2014.2.716/styles/kendo.common.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="/devtools/winforms/assets/styles-0b5a71aa940403cb3ac60d7e91e25e1d.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/theme-52ac78f88dc084a004a9f7d63a3c4245.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/branding-fafb6ed99bf90d251675534381e6f139.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/highlight-49ceada082f1c903edb130c25d09cf1f.css">
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://cdn.kendostatic.com/2014.2.716/js/kendo.web.min.js"></script>
        <script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/app-6da8e8e1ef6e19ee4a020ec34f48078c.js"></script>
		<script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/branding-59377013fb75f02a1dbffd638033ef6d.js"></script>
		<script src="/devtools/winforms/assets/feedback-76cd418a099f8d21592f412fb4a31191.js"></script>
		
		<!--[if lt IE 9]>
		<script>
		document.createElement('header');
		document.createElement('nav');
		document.createElement('section');
		document.createElement('article');
		document.createElement('aside');
		document.createElement('footer');
		document.createElement('hgroup');
		</script>
		<![endif]-->
    </head>
    <body class="faux-columns">
        <!-- Google Tag Manager -->
        <noscript>
            <iframe src="//www.googletagmanager.com/ns.html?id=GTM-6X92" height="0" width="0" style="display: none; visibility: hidden"></iframe>
        </noscript>
        <script>(function(w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-6X92');</script>
        <!-- End Google Tag Manager -->
        <header id="page-header">
			<span class="toggle-nav"><span></span></span>
            


<div id="page-search">
	<script>
  (function() {
    var cx = '001595215763381649090:jt1stbj813w';
    var gcse = document.createElement('script');
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

</div>

<span class="show-search">
	<span class="k-icon k-i-search"></span>
</span>

<div class="nav-buttons">


</div>





        </header>

        <div id="page-inner-content">
    <div id="page-nav">
        <div id="page-tree"></div>
        <script>
			$("#page-tree").kendoTreeView({
				dataSource: {
					transport: {
						read: {
							url: "/devtools/winforms/default.json",
							dataType: "json"
						}
					},
					schema: {
						model: {
							id: "path",
							children: "items",
							hasChildren: "items"
						}
					}
				},
				select: preventParentSelection,
				template: navigationTemplate("/devtools/winforms/"),
				dataBound: expandNavigation("telerik-presentation-framework/getting-started/tpf-getting-started.html")
			});
        </script>
		<div id="page-api" class="k-treeview">
			<ul class="k-group">
				<li class="k-item">
					<span class="k-icon k-plus" role="presentation"></span>
					<span class="k-in">
						<a href="/devtools/winforms/api/" target="_blank">API Reference</a>
					</span>
				</li>
			</ul>
		</div>			
    </div>
	<a id="page-edit-link" class="btn btn-action" href="https://github.com/telerik/xaml-docs/edit/master/telerik-presentation-framework/getting-started/tpf-getting-started.md">Edit this page</a>
    <div id="page-article">       
        <article>
            <h1 id="getting-started"><a href="#getting-started">Getting Started</a></h1>

<p>The following tutorial demonstrates:</p>

<ul>
<li><p>Using primitives to build a custom panel element.</p></li>
<li><p>Using the custom panel element to build a custom RadControl.</p></li>
<li><p>Using dependency properties.</p></li>
</ul>

<p>The example control will contain a filled area and a centered text primitive. A timer will update the text to reflect the current date and time.<img src="images/tpf-getting-started001.png" alt="tpf-getting-started 001"></p>

<h2 id="create-the-element-class"><a href="#create-the-element-class">Create the Element Class</a></h2>

<ol>
<li><p>In Visual Studio, create a new <strong>Windows Controls Library</strong>. In this example the library will be named "RadControlLib001".</p></li>
<li><p>Add references to Telerik.WinControls.UI.dll, TelerikCommon.dll and Telerik.WinControls.dll</p></li>
<li><p>Delete the UserControl1, since we will not need it</p></li>
<li><p>In the controls library add a new class "MyPanelElement.cs".</p></li>
<li><p>Replace the MyPanelElement.cs code with the code below.</p></li>
</ol>

<blockquote>
<p>Notice in the code below:</p>
</blockquote>

<ul>
<li><p>MyPanelElement descends from RadItem so that it can be used in the designer.</p></li>
<li><p>In the CreateChildElements() method the Class property of each primitive is assigned. This allows Telerik Presentation Foundation to apply themes to specific parts of the control.</p></li>
<li><p>In the CreateChildElements() method the TextPrimitive Text property is bound to the CurrentTimeProperty.</p></li>
<li><p>A standard CLR style property is defined for CurrentTime that wraps the Dependency property.The effect of this configuration of properties is that when the CurrentTime property is changed, either by a timer or elsewhere in the code, the dependency property CurrentTimeProperty value changes, the bound TextPrimitive Text property is assigned the CurrentTimeProperty value and the display updates to show the new time.</p></li>
</ul>

<h4><strong>[C#] Creating MyPanelElement</strong></h4>

<pre><code>    public class MyPanelElement : RadElement
    {
        TextPrimitive text;
        FillPrimitive background;
        Timer updateTime;

        protected override void CreateChildElements()
        {
            base.CreateChildElements();
            this.text = new TextPrimitive();
            this.text.ZIndex = 2;
            this.text.Margin = new Padding(39, 45, 0, 0);
            this.text.BindProperty(TextPrimitive.TextProperty, this,
            MyPanelElement.CurrentTimeProperty, PropertyBindingOptions.OneWay);
            this.background = new FillPrimitive();
            this.background.GradientStyle = GradientStyles.OfficeGlass;
            this.Children.Add(this.text);
            this.Children.Add(this.background);
            updateTime = new Timer();
            updateTime.Interval = 100;
            updateTime.Tick += new EventHandler(updateTime_Tick);
            updateTime.Start();
        }

        bool active = true;

        public bool Active
        {
            get { return active; }
            set
            {
                active = value;
                if (!value)
                {
                    this.updateTime.Stop();
                }
                else
                {
                    this.updateTime.Start();
                }
            }
        }
        void updateTime_Tick(object sender, EventArgs e)
        {
            this.SetValue(CurrentTimeProperty, DateTime.Now.ToString());
        }

        public static RadProperty CurrentTimeProperty = 
            RadProperty.Register("CurrentTimeProperty", typeof(string), typeof(MyPanelElement),
        new RadElementPropertyMetadata(null, ElementPropertyOptions.AffectsDisplay));

        public string CurrentTime
        {
            get { return (string)this.GetValue(CurrentTimeProperty); }
            set { this.SetValue(CurrentTimeProperty, value); }
        }
    }
</code></pre>

<h4><strong>[VB.NET] Creating MyPanelElement</strong></h4>

<pre><code>Public Class MyPanelElement
    Inherits RadItem
    Private text_ As TextPrimitive
    Private background As FillPrimitive
    Private updateTime As Timer
    Protected Overloads Overrides Sub CreateChildElements()
        MyBase.CreateChildElements()
        Me.text_ = New TextPrimitive()
        Me.text_.ZIndex = 2
        Me.text_.Margin = New Padding(39, 45, 0, 0)
        Me.text_.BindProperty(TextPrimitive.TextProperty, Me, MyPanelElement.CurrentTimeProperty, PropertyBindingOptions.OneWay)
        Me.background = New FillPrimitive()
        Me.background.GradientStyle = GradientStyles.OfficeGlass
        Me.Children.Add(Me.text_)
        Me.Children.Add(Me.background)
        updateTime = New Timer()
        updateTime.Interval = 100
        AddHandler updateTime.Tick, AddressOf updateTime_Tick
        updateTime.Start()
    End Sub
    Private active As Boolean = True
    Public Property ActiveProp() As Boolean
        Get
            Return active
        End Get
        Set(ByVal value As Boolean)
            active = value
            If Not value Then
                Me.updateTime.[Stop]()
            Else
                Me.updateTime.Start()
            End If
        End Set
    End Property

    Sub updateTime_Tick(ByVal sender As Object, ByVal e As EventArgs)
        Me.SetValue(CurrentTimeProperty, DateTime.Now.ToString())
    End Sub
    Public Shared CurrentTimeProperty As RadProperty = RadProperty.Register("CurrentTimeProperty", GetType(String), GetType(MyPanelElement), New RadElementPropertyMetadata(Nothing, ElementPropertyOptions.AffectsDisplay))
    Public Property CurrentTime() As String
        Get
            Return DirectCast(Me.GetValue(CurrentTimeProperty), String)
        End Get
        Set(ByVal value As String)
            Me.SetValue(CurrentTimeProperty, value)
        End Set
    End Property
End Class
</code></pre>

<h2 id="create-the-control-class"><a href="#create-the-control-class">Create the Control Class</a></h2>

<ol>
<li><p>Add a second class to the control library and name it "MyPanel.cs".</p></li>
<li><p>Replace the MyPanel.cs code with the code below.</p></li>
</ol>

<blockquote>
<p>Notice in the code below:</p>
</blockquote>

<ul>
<li><p>MyPanel descends from RadControl.</p></li>
<li><p>The PanelElement property surfaces the underlying element for general purpose uses. In this example the PanelElement property is used in the theme designer.</p></li>
<li><p>In the CreateChildItems() method, MyPanelElement is created and added to the root element Children collection.</p></li>
</ul>

<h4><strong>[C#] Creating MyPanel control</strong></h4>

<pre><code>    [ToolboxItem(true)]
    public class MyPanel : RadControl
    {
        private MyPanelElement panelElement;

        public MyPanel()
        {
            this.AutoSize = true;
        }

        public MyPanelElement PanelElement
        {
            get
            {
                return this.panelElement;
            }
        }

        public bool Active
        {
            get
            {
                return this.panelElement.Active;
            }
            set
            {
                this.panelElement.Active = value;
            }
        }

        protected override Size DefaultSize
        {
            get
            {
                return new Size(200, 100);
            }
        }

        protected override void CreateChildItems(RadElement parent)
        {
            this.panelElement = new MyPanelElement();
            this.RootElement.Children.Add(panelElement);
            base.CreateChildItems(parent);
        }
    }
</code></pre>

<h4><strong>[VB.NET] Using MyPanel control</strong></h4>

<pre><code>&lt;ToolboxItem(True)&gt; _
Public Class MyPanel
    Inherits RadControl
    Private panelElement As MyPanelElement
    Public Sub New()
        Me.AutoSize = True
    End Sub
    Public ReadOnly Property PanelElementProp() As MyPanelElement
        Get
            Return Me.panelElement
        End Get
    End Property
    Public Property ActiveProp() As Boolean
        Get
            Return Me.panelElement.ActiveProp
        End Get
        Set(ByVal value As Boolean)
            Me.panelElement.ActiveProp = value
        End Set
    End Property
    Protected Overloads Overrides ReadOnly Property DefaultSize() As System.Drawing.Size
        Get
            Return New System.Drawing.Size(200, 100)
        End Get
    End Property
    Protected Overloads Overrides Sub CreateChildItems(ByVal parent As RadElement)
        Me.panelElement = New MyPanelElement()
        Me.RootElement.Children.Add(panelElement)
        MyBase.CreateChildItems(parent)
    End Sub
End Class
</code></pre>

<h2 id="testing-the-control"><a href="#testing-the-control">Testing the Control</a></h2>

<ol>
<li><p>Add a new <strong>Windows Forms</strong> project to the solution to test the control library.</p></li>
<li><p>Add a reference to the control library.<img src="images/tpf-getting-started002.png" alt="tpf-getting-started 002"> </p></li>
<li><p>Drop the <strong>MyPanel</strong> control from the <strong>ToolBox</strong> to the form.</p></li>
<li><p>In the Properties Window set the <strong>Active</strong> property for MyPanel to <strong>True</strong>.</p></li>
</ol>

<p>The control should now look something like this:<img src="images/tpf-getting-started003.png" alt="tpf-getting-started 003"></p>
        </article>
    </div>	
</div>

<footer>	
    <p><a onclick="javascript:SubmitFeedback('documentation@telerik.com','Telerik UI for WinForms','','','','%0\dYour%20feedback%20is%20used%20to%20improve%20the%20documentation%20and%20the%20product.%20Your%20e-mail%20address%20will%20not%20be%20used%20for%20any%20other%20purpose%20and%20is%20disposed%20of%20after%20the%20issue%20you%20report%20is%20resolved.%20%20While%20working%20to%20resolve%20the%20issue%20that%20you%20report,%20you%20may%20be%20contacted%20via%20e-mail%20to%20get%20further%20details%20or%20clarification%20on%20the%20feedback%20you%20sent.%20After%20the%20issue%20you%20report%20has%20been%20addressed,%20you%20may%20receive%20an%20e-mail%20to%20let%20you%20know%20that%20your%20feedback%20has%20been%20addressed.%0\A%0\d','Customer%20Feedback'); return false;" href="javascript:;" id="send-feedback">Send Feedback</a> Copyright &copy; 2002-<span id="toYear"></span> Telerik. All rights reserved.</p>
</footer>

    </body>
</html>

