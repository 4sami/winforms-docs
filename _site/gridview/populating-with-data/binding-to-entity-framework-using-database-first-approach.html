<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=9">
        <title>Binding to EntityFramework using Database first approach</title>
		
        <link href="/devtools/winforms/favicon.ico?Version=2014" rel="shortcut icon" />
		
        <meta name="description" content="Binding to EntityFramework using Database first approach">
        <link href="http://cdn.kendostatic.com/2014.2.716/styles/kendo.common.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="/devtools/winforms/assets/styles-849dcaf701d866988e8c3593f15b66de.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/theme-52ac78f88dc084a004a9f7d63a3c4245.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/branding-fafb6ed99bf90d251675534381e6f139.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/highlight-49ceada082f1c903edb130c25d09cf1f.css">
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://cdn.kendostatic.com/2014.2.716/js/kendo.web.min.js"></script>
        <script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/app-6da8e8e1ef6e19ee4a020ec34f48078c.js"></script>
		<script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/branding-59377013fb75f02a1dbffd638033ef6d.js"></script>
		<script src="/devtools/winforms/assets/feedback-76cd418a099f8d21592f412fb4a31191.js"></script>
		
		<!--[if lt IE 9]>
		<script>
		document.createElement('header');
		document.createElement('nav');
		document.createElement('section');
		document.createElement('article');
		document.createElement('aside');
		document.createElement('footer');
		document.createElement('hgroup');
		</script>
		<![endif]-->
    </head>
    <body class="faux-columns">
        <!-- Google Tag Manager -->
        <noscript>
            <iframe src="//www.googletagmanager.com/ns.html?id=GTM-6X92" height="0" width="0" style="display: none; visibility: hidden"></iframe>
        </noscript>
        <script>(function(w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-6X92');</script>
        <!-- End Google Tag Manager -->
        <header id="page-header">
			<span class="toggle-nav"><span></span></span>
            <div id="logo-bar">
	<a href="/devtools/winforms/" title="UI for WinForms">
		<span>UI for WinForms</span>
	</a>
</div> 
<div id="page-search">
	<script>
  (function() {
    var cx = '001595215763381649090:jt1stbj813w';
    var gcse = document.createElement('script');
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

</div>

<span class="show-search">
	<span class="k-icon k-i-search"></span>
</span>

<div class="nav-buttons">
	<a href="http://demos.telerik.com/" title="WinForms Demos" target="_blank" class="btn demos-btn">Demos</a>	
	<a href="http://www.telerik.com/products/winforms.aspx" title="About UI for WinForms" target="_blank" class="btn about-btn">About</a>
	<a href="http://www.telerik.com/purchase/individual/winforms.aspx" title="Pricing" target="_blank" class="btn pricing-btn">Pricing</a>
	<a href="http://www.telerik.com/products/winforms/download.aspx" title="Try now" target="_blank" class="btn btn-primary">Try now</a>
</div>





        </header>

        <div id="page-inner-content">
    <div id="page-nav">
        <div id="page-tree"></div>
        <script>
			$("#page-tree").kendoTreeView({
				dataSource: {
					transport: {
						read: {
							url: "/devtools/winforms/default.json",
							dataType: "json"
						}
					},
					schema: {
						model: {
							id: "path",
							children: "items",
							hasChildren: "items"
						}
					}
				},
				select: preventParentSelection,
				template: navigationTemplate("/devtools/winforms/"),
				dataBound: expandNavigation("gridview/populating-with-data/binding-to-entity-framework-using-database-first-approach.html")
			});
        </script>
		<div id="page-api" class="k-treeview">
			<ul class="k-group">
				<li class="k-item">
					<span class="k-icon k-plus" role="presentation"></span>
					<span class="k-in">
						<a href="/devtools/winforms/api/" target="_blank">API Reference</a>
					</span>
				</li>
			</ul>
		</div>			
    </div>
	<a id="page-edit-link" class="btn btn-action" href="https://github.com/telerik/xaml-docs/edit/master/gridview/populating-with-data/binding-to-entity-framework-using-database-first-approach.md">Edit this page</a>
    <div id="page-article">       
        <article>
            <h1 id="binding-to-entityframework-using-database-first-approach"><a href="#binding-to-entityframework-using-database-first-approach">Binding to EntityFramework using Database first approach</a></h1>

<p>This article demonstrates how to build a hierarchical Grid using Entity Framework and Database first approach.<br>
      <img src="images/gridview-populating-with-data-binding-to-entity-framework-using-database-first-approach001.png" alt="gridview-populating-with-data-binding-to-entity-framework-using-database-first-approach 001"></p>

<h2 id="installing-and-configuring-entity-framework"><a href="#installing-and-configuring-entity-framework">Installing and Configuring Entity Framework</a></h2>

<p>In order to download Entity Framework you can follow this MSDN article - <br>
          <a href="http://msdn.microsoft.com/en-us/data/ee712906.aspx"><br>
              Get Entity Framework<br>
            </a>. If you are using Visual Studio version below 2012 you may need to install the NuGet package manager -<br>
          <a href="http://docs.nuget.org/docs/start-here/installing-nuget"><br>
              Installing NuGet<br>
            </a></p>

<p>After you have installed Entity Framework, follow these steps:</p>

<ol>
<li><p>Right-click on your Project in Visual Studio and choose Add &gt; New Item<br>
        <img src="images/gridview-populating-with-data-binding-to-entity-framework-using-database-first-approach002.png" alt="gridview-populating-with-data-binding-to-entity-framework-using-database-first-approach 002"></p></li>
<li><p>Choose ADO.NET Entity Data Model<br>
        <img src="images/gridview-populating-with-data-binding-to-entity-framework-using-database-first-approach003.png" alt="gridview-populating-with-data-binding-to-entity-framework-using-database-first-approach 003"></p></li>
<li><p>From the next window choose Generate From Database and Click next</p></li>
<li><p>Choose your database and click Next<br>
        <img src="images/gridview-populating-with-data-binding-to-entity-framework-using-database-first-approach004.png" alt="gridview-populating-with-data-binding-to-entity-framework-using-database-first-approach 004"></p></li>
<li><p>From this final window select the needed tables and click Finish<br>
        <img src="images/gridview-populating-with-data-binding-to-entity-framework-using-database-first-approach005.png" alt="gridview-populating-with-data-binding-to-entity-framework-using-database-first-approach 005"></p></li>
</ol>

<p>Now our Models should be generated.        </p>

<h2 id="configure-radgridview-to-work-with-entityframework"><a href="#configure-radgridview-to-work-with-entityframework">Configure RadGridView to work with EntityFramework</a></h2>

<ol>
<li>Add RadGridView to the Form and then in the code behind add an instance of the DbContext which will provide us access to the data in the database</li>
</ol>

<h4><strong>[C#]</strong></h4>

<pre><code>        NorthwindEntities dbContext = new NorthwindEntities();
</code></pre>

<h4><strong>[VB]</strong></h4>

<pre><code>    Dim dbContext As New NorthwindEntities
</code></pre>

<blockquote>
<p>When binding RadGridView we will be using the Local property of DbSet. The Local property provides access to the data without a query being sent to the database.  It is also in sync with the<br>
                DbSet. For example, if an entry is deleted from the Local property,  the next time a query is executed it will be deleted from the database.</p>
</blockquote>

<ol>
<li>Add the following code to your Formâ€™s constructor:</li>
</ol>

<h4><strong>[C#]</strong></h4>

<pre><code>            dbContext.Customers.Load();
            this.radGridView1.DataSource = this.dbContext.Customers.Local.ToBindingList();
</code></pre>

<h4><strong>[VB]</strong></h4>

<pre><code>        dbContext.Customers.Load()
        Me.radGridView1.DataSource = Me.dbContext.Customers.Local.ToBindingList()
</code></pre>

<p>These extension methods are located in the System.Data.Entity namespace. As the Local property represents the local data, we need to first Load the data from the Database. Then by calling<br>
              ToBindingList we make sure that our RadGridView and the Local data will be in sync.</p>

<blockquote>
<p>When adding new rows in RadGridView by default the Id cell of the new rows will be 0 since the data was not send to the database, therefore no UniqueId has been assigned yet.</p>
</blockquote>

<ol>
<li>Now we just need to add the the relation between the Customers and Orders tables:</li>
</ol>

<h4><strong>[C#]</strong></h4>

<pre><code>            dbContext.Orders.Load();

            GridViewTemplate template = new GridViewTemplate();
            template.DataSource = dbContext.Orders.Local.ToBindingList();
            this.radGridView1.MasterTemplate.Templates.Add(template);

            GridViewRelation relation = new GridViewRelation(this.radGridView1.MasterTemplate);
            relation.ChildTemplate = template;
            relation.RelationName = "CustomersToOrders";
            relation.ParentColumnNames.Add("CustomerId");
            relation.ChildColumnNames.Add("CustomerId");
            this.radGridView1.Relations.Add(relation);
</code></pre>

<h4><strong>[VB]</strong></h4>

<pre><code>        dbContext.Orders.Load()

        Dim template As New GridViewTemplate()
        template.DataSource = dbContext.Orders.Local.ToBindingList()
        Me.radGridView1.MasterTemplate.Templates.Add(template)

        Dim relation As New GridViewRelation(Me.radGridView1.MasterTemplate)
        relation.ChildTemplate = template
        relation.RelationName = "CustomersToOrders"
        relation.ParentColumnNames.Add("CustomerId")
        relation.ChildColumnNames.Add("CustomerId")
        Me.radGridView1.Relations.Add(relation)
</code></pre>

<ol>
<li>The final step is to save the changes to the database when the form closes. For this purpose we need to subscribe to the FormClosing event of the Form and add the following code in the event handle:</li>
</ol>

<h4><strong>[C#]</strong></h4>

<pre><code>            this.dbContext.SaveChanges();
</code></pre>

<h4><strong>[VB]</strong></h4>

<pre><code>        Me.dbContext.SaveChanges()
</code></pre>

<p>Now, if you run your application you should see the hierarchical data.</p>
        </article>
    </div>	
</div>

<footer>	
    <p><a onclick="javascript:SubmitFeedback('documentation@telerik.com','Telerik UI for WinForms','','','','%0\dYour%20feedback%20is%20used%20to%20improve%20the%20documentation%20and%20the%20product.%20Your%20e-mail%20address%20will%20not%20be%20used%20for%20any%20other%20purpose%20and%20is%20disposed%20of%20after%20the%20issue%20you%20report%20is%20resolved.%20%20While%20working%20to%20resolve%20the%20issue%20that%20you%20report,%20you%20may%20be%20contacted%20via%20e-mail%20to%20get%20further%20details%20or%20clarification%20on%20the%20feedback%20you%20sent.%20After%20the%20issue%20you%20report%20has%20been%20addressed,%20you%20may%20receive%20an%20e-mail%20to%20let%20you%20know%20that%20your%20feedback%20has%20been%20addressed.%0\A%0\d','Customer%20Feedback'); return false;" href="javascript:;" id="send-feedback">Send Feedback</a> Copyright &copy; 2002-<span id="toYear"></span> Telerik. All rights reserved.</p>
</footer>

    </body>
</html>

