<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=9">
        <title>Hierarchy of one to many relations</title>
		
        <link href="/devtools/winforms/favicon.ico?Version=2014" rel="shortcut icon" />
		
        <meta name="description" content="Hierarchy of one to many relations">
        <link href="http://cdn.kendostatic.com/2014.2.716/styles/kendo.common.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="/devtools/winforms/assets/styles-0b5a71aa940403cb3ac60d7e91e25e1d.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/theme-52ac78f88dc084a004a9f7d63a3c4245.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/branding-fafb6ed99bf90d251675534381e6f139.css">
        <link rel="stylesheet" href="/devtools/winforms/assets/highlight-49ceada082f1c903edb130c25d09cf1f.css">
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://cdn.kendostatic.com/2014.2.716/js/kendo.web.min.js"></script>
        <script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/app-6da8e8e1ef6e19ee4a020ec34f48078c.js"></script>
		<script src="/devtools/winforms/assets/prettify-31f05a2784b46b14f119862e47123f4c.js"></script>
        <script src="/devtools/winforms/assets/branding-59377013fb75f02a1dbffd638033ef6d.js"></script>
		<script src="/devtools/winforms/assets/feedback-76cd418a099f8d21592f412fb4a31191.js"></script>
		
		<!--[if lt IE 9]>
		<script>
		document.createElement('header');
		document.createElement('nav');
		document.createElement('section');
		document.createElement('article');
		document.createElement('aside');
		document.createElement('footer');
		document.createElement('hgroup');
		</script>
		<![endif]-->
    </head>
    <body class="faux-columns">
        <!-- Google Tag Manager -->
        <noscript>
            <iframe src="//www.googletagmanager.com/ns.html?id=GTM-6X92" height="0" width="0" style="display: none; visibility: hidden"></iframe>
        </noscript>
        <script>(function(w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-6X92');</script>
        <!-- End Google Tag Manager -->
        <header id="page-header">
			<span class="toggle-nav"><span></span></span>
            <div id="logo-bar">
	<a href="/devtools/winforms/" title="UI for WinForms">
		<span>UI for WinForms</span>
	</a>
</div> 
<div id="page-search">
	<script>
  (function() {
    var cx = '001595215763381649090:jt1stbj813w';
    var gcse = document.createElement('script');
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

</div>

<span class="show-search">
	<span class="k-icon k-i-search"></span>
</span>

<div class="nav-buttons">
	<a href="http://demos.telerik.com/wpf/" title="WPF Demos" target="_blank" class="btn demos-btn">Demos</a>	
	<a href="http://www.telerik.com/products/wpf/overview.aspx" title="About UI for WPF" target="_blank" class="btn about-btn">About</a>
	<a href="http://www.telerik.com/purchase/individual/wpf.aspx" title="Pricing" target="_blank" class="btn pricing-btn">Pricing</a>
	<a href="http://www.telerik.com/products/wpf/download.aspx" title="Try now" target="_blank" class="btn btn-primary">Try now</a>
</div>





        </header>

        <div id="page-inner-content">
    <div id="page-nav">
        <div id="page-tree"></div>
        <script>
			$("#page-tree").kendoTreeView({
				dataSource: {
					transport: {
						read: {
							url: "/devtools/winforms/default.json",
							dataType: "json"
						}
					},
					schema: {
						model: {
							id: "path",
							children: "items",
							hasChildren: "items"
						}
					}
				},
				select: preventParentSelection,
				template: navigationTemplate("/devtools/winforms/"),
				dataBound: expandNavigation("gridview/hierarchical-grid/hirarchical-grid-hierarchy-of-one-to-many-relations.html")
			});
        </script>
		<div id="page-api" class="k-treeview">
			<ul class="k-group">
				<li class="k-item">
					<span class="k-icon k-plus" role="presentation"></span>
					<span class="k-in">
						<a href="/devtools/winforms/api/" target="_blank">API Reference</a>
					</span>
				</li>
			</ul>
		</div>			
    </div>
	<a id="page-edit-link" class="btn btn-action" href="https://github.com/telerik/xaml-docs/edit/master/gridview/hierarchical-grid/hirarchical-grid-hierarchy-of-one-to-many-relations.md">Edit this page</a>
    <div id="page-article">       
        <article>
            <h1 id="hierarchy-of-one-to-many-relations"><a href="#hierarchy-of-one-to-many-relations">Hierarchy of one to many relations</a></h1>

<p><strong>RadGridView</strong> supports binding to a hierarchy containing one to many relations. The result is presented in tabs inside child views.<img src="images/grid-hierarchical-grid-hierarchy-of-one-to-many-relations001.png" alt="grid-hierarchical-grid-hierarchy-of-one-to-many-relations 001"></p>

<p>Follow these steps to setup the hierarchy:</p>

<p><strong>1.</strong> Bind to a data source (e.g. DataTable)</p>

<p><strong>2.</strong> Add at least two child templates and set their data source.</p>

<p><strong>3.</strong> Add relations to connect the child templates with the master template.</p>

<p><strong>4.</strong> Run the project.</p>

<h4><strong>[C#] Hierarchy of one to many relation</strong></h4>

<pre><code>        private void HierarchyOfOneToManyRelation_Load(object sender, EventArgs e)
        {
            this.songsTableAdapter.Fill(this.musicCollectionDataSet.Songs);
            this.artistsTableAdapter.Fill(this.musicCollectionDataSet.Artists);
            this.albumsTableAdapter.Fill(this.musicCollectionDataSet.Albums);

            this.radGridView1.DataSource = albumsBindingSource;
            radGridView1.Columns["Image"].ImageLayout = ImageLayout.Zoom;

            GridViewTemplate childTemplate1 = new GridViewTemplate();
            childTemplate1.DataSource = artistsBindingSource;
            childTemplate1.Columns["Image"].ImageLayout = ImageLayout.Zoom;
            childTemplate1.Caption = "Artist";

            this.radGridView1.MasterTemplate.Templates.Add(childTemplate1);

            GridViewRelation relation1 = new GridViewRelation(this.radGridView1.MasterTemplate);
            relation1.RelationName = "productmodel_productModelDescription";
            relation1.ParentColumnNames.Add("ArtistID");
            relation1.ChildColumnNames.Add("ArtistID");
            relation1.ChildTemplate = childTemplate1;
            this.radGridView1.Relations.Add(relation1);

            GridViewTemplate childTemplate2 = new GridViewTemplate();
            childTemplate2.DataSource = songsBindingSource;
            childTemplate2.Caption = "Songs";
            this.radGridView1.MasterTemplate.Templates.Add(childTemplate2);

            GridViewRelation relation2 = new GridViewRelation(this.radGridView1.MasterTemplate);
            relation2.RelationName = "productdescription_productModelDescription";
            relation2.ParentColumnNames.Add("AlbumID");
            relation2.ChildColumnNames.Add("AlbumID");
            relation2.ChildTemplate = childTemplate2;
            this.radGridView1.Relations.Add(relation2);
        }
</code></pre>

<h4><strong>[VB.NET] Hierarchy of one to many relation</strong></h4>

<pre><code>    Private Sub HierarchyOfOneToManyRelation_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Me.SongsTableAdapter.Fill(Me.MusicCollectionDataSet.Songs)
        Me.ArtistsTableAdapter.Fill(Me.MusicCollectionDataSet.Artists)
        Me.AlbumsTableAdapter.Fill(Me.MusicCollectionDataSet.Albums)

        Me.RadGridView1.DataSource = AlbumsBindingSource
        RadGridView1.Columns("Image").ImageLayout = ImageLayout.Zoom

        Dim childTemplate1 As New GridViewTemplate()
        childTemplate1.DataSource = ArtistsBindingSource
        childTemplate1.Columns("Image").ImageLayout = ImageLayout.Zoom
        childTemplate1.Caption = "Artist"

        Me.RadGridView1.MasterTemplate.Templates.Add(childTemplate1)

        Dim relation1 As New GridViewRelation(Me.RadGridView1.MasterTemplate)
        relation1.RelationName = "productmodel_productModelDescription"
        relation1.ParentColumnNames.Add("ArtistID")
        relation1.ChildColumnNames.Add("ArtistID")
        relation1.ChildTemplate = childTemplate1
        Me.RadGridView1.Relations.Add(relation1)

        Dim childTemplate2 As New GridViewTemplate()
        childTemplate2.DataSource = SongsBindingSource
        childTemplate2.Caption = "Songs"
        Me.RadGridView1.MasterTemplate.Templates.Add(childTemplate2)

        Dim relation2 As New GridViewRelation(Me.RadGridView1.MasterTemplate)
        relation2.RelationName = "productdescription_productModelDescription"
        relation2.ParentColumnNames.Add("AlbumID")
        relation2.ChildColumnNames.Add("AlbumID")
        relation2.ChildTemplate = childTemplate2
        Me.RadGridView1.Relations.Add(relation2)
    End Sub
</code></pre>

<blockquote>
<p>There is an example demonstrating how to build hierarchy containingÂ one-to-many relations in the demo application.</p>
</blockquote>

<pre><code>Formatting tabs
</code></pre>

<p>In some cases you may want to set custom text to the tabs of the child views different than<br>
    the text of the template's caption. In this case, the solution is to use the <br>
    [</p>

<pre><code>Formatting events](/gridview/cells/formatting-cells)
that RadGridView exposes, and more specifically, the ViewCellFormatting event. This event will give you
access to the detail cell that contains the whole RadPageViewElement and from this element you will be
able to set the text of each tab separately. For example, if we need to display the count of the 
rows in each view, we can use the following code snippet in order to apply our custom text:
</code></pre>

<h4><strong>[C#]</strong></h4>

<pre><code>        void radGridView1_ViewCellFormatting(object sender, CellFormattingEventArgs e)
        {
            GridDetailViewCellElement detailCell = e.CellElement as GridDetailViewCellElement;
            if (detailCell != null)
            {
                for (int i = 0; i &lt; detailCell.PageViewElement.Items.Count; i++)
                {
                    // We take the view that contains the child rows from the corresponding RadPageViewStripItem
                    GridViewInfo info = (GridViewInfo)detailCell.PageViewElement.Items[i].Tag;
                    // We set our custom text to the tab, taking the count of rows that the child view has
                    detailCell.PageViewElement.Items[i].Text = string.Format("{0}, Rows={1}", info.ViewTemplate.Caption, info.Rows.Count.ToString());
                }
            }
        }
</code></pre>

<h4><strong>[VB.NET]</strong></h4>

<pre><code>    Private Sub RadGridView1_ViewCellFormatting(ByVal sender As Object, ByVal e As Telerik.WinControls.UI.CellFormattingEventArgs) Handles RadGridView1.ViewCellFormatting
        Dim detailCell As GridDetailViewCellElement = TryCast(e.CellElement, GridDetailViewCellElement)
        If detailCell IsNot Nothing Then
            For i As Integer = 0 To detailCell.PageViewElement.Items.Count - 1
                ' We take the view that contains the child rows from the corresponding RadPageViewStripItem
                Dim info As GridViewInfo = CType(detailCell.PageViewElement.Items(i).Tag, GridViewInfo)
                ' We set our custom text to the tab, taking the count of rows that the child view has
                detailCell.PageViewElement.Items(i).Text = String.Format("{0}, Rows={1}", info.ViewTemplate.Caption, info.Rows.Count.ToString())
            Next i
        End If
    End Sub
</code></pre>

<p>The result is shown on the screenshot below:<br>
    <img src="images/gridview-hirarchical-grid-hierarchy-of-one-to-many-relations002.png" alt="gridview-hirarchical-grid-hierarchy-of-one-to-many-relations 002"></p>
        </article>
    </div>	
</div>

<footer>	
    <p><a onclick="javascript:SubmitFeedback('documentation@telerik.com','Telerik UI for WinForms','','','','%0\dYour%20feedback%20is%20used%20to%20improve%20the%20documentation%20and%20the%20product.%20Your%20e-mail%20address%20will%20not%20be%20used%20for%20any%20other%20purpose%20and%20is%20disposed%20of%20after%20the%20issue%20you%20report%20is%20resolved.%20%20While%20working%20to%20resolve%20the%20issue%20that%20you%20report,%20you%20may%20be%20contacted%20via%20e-mail%20to%20get%20further%20details%20or%20clarification%20on%20the%20feedback%20you%20sent.%20After%20the%20issue%20you%20report%20has%20been%20addressed,%20you%20may%20receive%20an%20e-mail%20to%20let%20you%20know%20that%20your%20feedback%20has%20been%20addressed.%0\A%0\d','Customer%20Feedback'); return false;" href="javascript:;" id="send-feedback">Send Feedback</a> Copyright &copy; 2002-<span id="toYear"></span> Telerik. All rights reserved.</p>
</footer>

    </body>
</html>

